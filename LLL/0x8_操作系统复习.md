# 操作系统复习

![lJukyF.png](https://s2.ax1x.com/2020/01/01/lJukyF.png)

## 一、操作系统

![lJu3Oe.png](https://s2.ax1x.com/2020/01/01/lJu3Oe.png)

1. 概念：是裸机之上的第一层软件；控制和管理计算机系统硬件和软件资源、合理地组织计算机工作流程，以方便用户使用的程序的集合。

2. 三个层次：

   - 操作系统对象：文件和作业、存储器、CPU、I/O设备
   - 控制和管理的软件集合：文件管理软件、存储管理软件、CPU管理软件、设备管理软件
   - 用户接口：图形接口、命令接口、程序接口

3. 主要目的

   - 提供一个计算机用户与计算机硬件系统之间的接口，使计算机更易于使用
   - 有效的控制管理计算机中各种硬件和软件资源，使之得到有效的利用
   - 合理的组织计算机系统的工作流程，改善系统性能

4. 发展：手工操作方式->批处理->多道程序设计技术->批处理、实时、分时网络操作系统、分布式操作系统

5. 四大特征

   - #### **并发**：指两个或两个以上事件在同一时间间隔内发生

     - 多道程序环境下，计算机系统中同时存在多个进程，宏观上，这些进程同时执行；微观上，多个进程之间是交替执行
     - 目的：提高系统资源的利用率和系统的吞吐量
     - 并行：某一时刻两个或多个事件在同时运行

   - 共享：指系统中硬件和软件资源可为多个用户同时使用

     - 互斥共享：在一段时间内只允许一个进程访问该资源（音频设备、打印机、磁带机）
     - 同时访问：允许在一段时间内由多个进程“同时”对它们进行访问。

   - 虚拟：通过某种技术，将一个物理实体变成若干个逻辑对应物

     - 虚拟处理机CPU：分时技术
     - 虚拟存储器（内存）：请求分页、分段存储系统
       - 覆盖
       - 交换
     - 虚拟外设：假脱机输入输出

   - 异步：内存中的多个进程均按照各自独立的、不可预知的速度向前推进

     - 只要运行环境相同，作业经历多次运行，都会获得完全相同的结果，即程序的可再现性

6. 三种基本类型（兼有分时、实时和批处理三者或其中两者的操作系统称为通用操作系统）

   - 批处理系统：（周转时间和系统吞吐量）

     - 单道批处理系统：系统对作业的处理都是成批的进行的，且在内存中始终只保持一道作业

       - 自动性：在顺利的情况下，在磁带上的一批作业能自动逐个的运行，不需要人工干预
       - 顺序性：先调入内存的作业先完成
       - 单道性：监督程序每次只调入一个作业进内存

     - 多道批处理系统（作业调度和进程调度）:同时将多个程序装入内存，并允许它们交替运行，共享系统中的各种硬件和软件资源

       - 多道性：内存中同时存放多道相互独立的程序，它们可以并发执行
       - 无序性：多道作业的完成顺序不固定
       - 调度性：作业需经过作业调度和进程调度两个过程
       
       优缺点：
       
       - 资源利用率高
       - 系统吞吐量大
       - 无交互能力
       - 平均周转时间长

   - #### **实时系统**：（实时性和可靠性）

     能够及时响应随机发生的外部事件，在严格的时间范围内，完成对该事件的处理，并控制所有实时任务协调一致地运行

     - **及时性**：信息接收、分析处理和发送程必须在严格的时间限制内完成
     - 交互性：允许用户输入数据，提出系统中有限的服务请求
     - 独立性：用户彼此独立、互不干扰，实时控制系统多个控制对象或多路现场信息采集是互相独立的
     - **高可靠性**：采取容错或冗余措施，保证具有非常高的可靠性

   - #### **分时系统**：（交互性和响应时间）

     - 多个用户分享同一计算机，多个程序分时共享硬、软件资源
     - 按时间片分配：各个程序在CPU上执行的轮换时间
     
     - 特点：多路性、独立性、**及时性、交互性**
     
     ![lGDKm9.png](https://s2.ax1x.com/2020/01/01/lGDKm9.png)

7. 网络操作系统和分布式操作系统的区别

   |                  | 网络操作系统                                                 | 分布式操作系统                                               |
   | ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
   | **概念**         | 计算机网络通过通信设施将物理上分散的具有自治功能的多个计算机系统互连起来，实现信息交换和资源共享的系统；网络操作系统指具有网络通信和网络服务功能的操作系统 | 通过通信网络方式，将地理上分散的、具有自治功能的多台分散的计算机通过互联网连接而成的系统，以实现信息交换和资源共享，协作完成指派的任务 |
   | **特点**         | C/S模式、P2P模式                                             | 分布性、并行性、透明性、共享性、健壮性                       |
   | **系统的配置**   | 不要求每个节点安装同一版本的操作系统                         | 各个节点上要配置相同的系统                                   |
   | **资源访问方式** | 区别对待本地资源和异地资源                                   | 所有资源都使用统一方式进行管理和访问                         |
   | **管理控制方式** | 集中在服务器                                                 | 分散在各个分布式节点中                                       |
   | **任务划分**     | 人（不透明）                                                 | 分布式系统（透明、黑盒子）                                   |

## 练习：

​	**1.**  在计算机系统中配置操作系统的主要目的是（**A**）。操作系统的主要功能是管理计算机系统中的（**B**），其中包括（**C**）、（**D**），以及文件和设备。这里的（**C**）管理主要是对进程进行管理。

​		**A**：（**1**）增强计算机系统的功能；（**2**）提高系统资源的利用率；（**3**）提高系统的运行速度；（**4**）合理组		织系统的工作流程，以提高吞吐量。

​		**B**：（**1**）程序和数据；（**2**）进程；（**3**）资源；（**4**）作业；（**5**）软件；（**6**）硬件。

​		**C**，**D**：（**1**）存储器；（**2**）虚拟存储器；（**3**）运算器；（**4**）处理机；（**5**）控制器。

​	**2.** 操作系统有多种类型：允许多个用户以交互方式使用计算机的操作系统称为（**A**）；允许多个用户将若干个作业提交给计算机系统集中处理的操作系统称为（**B**）；在（**C**）的控制下，计算机系统能即使处理由过程控制反馈的数据，并做出响应；在**IBM**－**PC**机上的操作系统称为（**D**）。

​		**A**，**B**，**C**，**D**：（**1**）批处理操作系统；（**2**）分时操作系统；（**3**）实时操作系统；（**4**）微机操作系统；		（**5**）多处理机操作系统。

3. 在设计分时操作系统时，首先要考虑的是（A）；在设计批处理操作系统时，先要考虑的是（B）；在设计实时操作系统时，首先要考虑的是（C）。

    A，B，C：（1）灵活性和可适应性；（2）交互性和响应时间；（3）周转时间和系统吞吐量；（4）实时性和可靠性。

4. 分时系统的响应时间（及时性）主要是根据(A)确定的，而试试系统的响应时间则是由（B）确定的。

   A，B：（1）时间片大小；（2）用户数目；（3）计算机运行速度；（4）用户所能接受的等待时间；（5）控制对象所能接受的时延；（6）实时调度。

5. 采用（A）结构时，将OS分成用于实现OS最基本功能的内核和提供各种服务的服务器两个部分。通常，下列模块中必须包含在操作系统内核中的是（B）模块。

   A：（1）整体式；（2）模块化；（3）层次式；（4）微内核。

   B：（1）内存分配；（2）中断处理；（3）文件处理；（4）命令处理。

6. 在3.X版本以前的MS－DOS是（A）操作系统，Windows95是（B）操作系统，WindowsXP是（C）操作系统，它们都是由（D）开发的。

   A，B，C：（1）单用户单任务；（2）单用户多任务；（3）多用户单任务；（4）多用户多任务。

   D：（1）IBM公司；（2）Microsoft公司；（3）Microsoft和IBM联合；（4）Bell实验室；

7. 下面8个系统中，必须是实时操作系统的有（   ）

     A计算机辅助设计系统；B 航空定票系统；C 过程控制系统；D 机器翻译系统；E 办公自动化系统；F 计算机激光照排系统；G情报检索系统；H导弹的制导系统

**二、 简答题**

​	**1.** 在操作系统中实现虚拟的关键技术是什么？并加以说明。

​	**2.** 试从交互性、及时性以及可靠性三个方面，比较分时系统与实时系。





## 二、进程管理

1. #### 进程组成：**程序、数据、进程控制卡（PCB）**

   - 进程：进程是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。它是操作系统进行资源分配和调度的基本单位
   - 进程控制卡（PCB）：操作系统用于记录进程状态及环境信息的数据结构
     - 进程标识符信息、处理机状态信息、进程调度信息、进程控制信息
     - 组织方式：线性表方式、链接方式、索引方式
   - 动态性：进程是活动的，动态性是进程最基本的特征
   - 并发性：多个进程同时在内存中，一个进程的运行还没有结束，另外一个进程的执行已经开始了
   - 独立性：进程实体是一个可以独立运行和独立获得资源的基本单位
   - 异步性：进程按各自独立的、不可预知的速度向前推进
   - 结构特性：进程是由程序段、数据段及进程控制块三部分组成

2. 进程和程序的区别

   - 程序是静态的，它是用户编写的若干代码的集合，可作为资料长期保存；进程是动态的，它是程序在系统中的一次运行过程
   - 进程和程序并非一一对应，同一个程序可以由多个进程分别执行，这些进程虽然执行相同的程序，但处理不同的数据；同样，一个进程通过程序间的调用方式，会涉及到多个程序

3. 进程的基本状态

   - 就绪状态（Ready）：已经分配到了除CPU外的所需资源
   - 执行状态（Running）：进程已经获得处理机，其程序正在执行
   - 阻塞状态（Blocked）：也可以称为等待状态。进程因为发生某个事件而暂停执行的状态
   - 其他状态：
     - 创建状态（新状态）：进程刚建立，还未送入就绪队列
     - 终止状态：进程正常或异常结束，操作系统已将其移出执行队列，但还没有将它撤消时的状态
     - 挂起状态：在硬盘上处于静止状态

   ![lGz4Ve.png](https://s2.ax1x.com/2020/01/01/lGz4Ve.png)

4. 进程状态转换

   ![lGIMFS.png](https://s2.ax1x.com/2020/01/01/lGIMFS.png)

5. 进程的同步与互斥

   - 间接制约关系（进程互斥）	——陌生人关系
     
     - 多个进程访问相同的资源时，当一个进程访问该资源，其它需访问该资源的进程必须等待
     
       （如打印机）
     
     - 加锁法：对临界区加锁以实现互斥（存在CPU浪费和不公平）
   - 直接制约关系（进程同步）    ——兄弟关系/合作者
     
     - 系统中多个进程需要相互合作才能完成同一任务
     
       （输入—>计算—>打印）
     
   - 同步机制准则：闲则让进、忙则等待、有限等待、让权等待

6. #### 临界资源和临界区

   - 临界资源：一次只允许一个进程访问的资源。临界资源在任何时刻不允许两个及以上并发进程同时访问
   - **临界区**：指进程访问临界资源的那段程序代码

7. 前驱图、Bernstein条件判断相邻两条语句是否可以并发执行

   - 前驱图：pi—>pj（不存在循环）

     - 每个结点可用于表示一条语句，一个程序段或进程
     - —>有向边表示偏序
     - pi：直接前驱，pj：直接后继，初始结点，终止结点，结点的重量（执行时间）

   - Bernstein条件：并发进程的无关性是进程与时间无关的一个充分条件。两个过程如果有数据冲突,那么就没法并行执行。

     - 例如：p1：y=z+y；p2： z=x+z，假设x=1，y=2，z=3

       如果先运行p1，则最后的结果是x=1，y=5，z=4；如果先运行p2，则x=1，y=6，z=4。两次的结果不一样，即程序不可再现，所以p1，p2不能并行的执行。

     - 对进程S1、S2，Bernstein条件要求R(S1)∩W(S2)∪W(S1)∩R(S2)∪W(S1)∩W(S2)={}

   - 程序顺序执行：顺序性、封闭性、可再现性

   - 程序并发执行：间断性、不封闭性、不可再现性

   - 多道程序系统：独立性、随机性、资源共享

8. #### 处理机状态：**系统态和用户态**

9. #### 原语的概念、原子操作

   - **原语**：系统状态下执行的某些具有特定功能的程序段
   - **原子操作**：一个操作中的动作要么全做，要么全不做

10. #### 信号量含义和P、V原语编程

    - 信号量：一种特殊变量，它用来表示系统中资源的使用情况，其值与临界区内所使用的临界资源的状态有关
      - 公有信号量：进程通过对公有信号量进行P、V操作，可实现资源的互斥访问
      - 私有信号量：仅允许拥有此信号量的进程执行P操作，而其它进程可对该信号量实施V操作，从而可实现进程之间的同步关系
    - P原语操作的主要动作
      - S－1
      - 如果S－1以后仍大于等于零，进程继续进行
      - 如果S－1以后小于零，将该进程阻塞以后插入阻塞队列，然后转进程调度

    - V原语操作的主要动作

      - S＋1
      - 如果相加后结果大于零，进程继续进行
      - 相加后结果小于等于零，从该信号的等待队列中唤醒一个等待进程，然后返回原进程继续执行或者转进程调度。

    - 信号量的值仅能通过P、V原语操作来改变

    - P、V原语实现互斥的步骤：

      - 为互斥访问的临界资源设置信号量，置其初始值为1，表示该临界资源未被占用，即临界资源的可用数量为1；

        ①执行P操作，申请进入临界区；

        ②进入临界区，访问临界资源；

        ③执行V操作，释放临界资源，允许其它进程访问。

      - 例：下面代码表示n个进程互斥访问临界资源S：

        semaphore S=1;

        P1( ){                           P2( ){                             Pn( ){

           while(1){                         while(1){                      while(1){

        ​               P(S);                            P(S);                             P(S);

        ​               临界区                         临界区        ....                 临界区

        ​               V(S);                            V(S);                             V(S);

        ​               剩余区;                         剩余区;                         剩余区;

        ​                 }                               }                               }

        ​        }                           }                                  }

    - P、V原语实现同步的步骤：

      - ①分析所涉及进程之间的制约关系

        ②设置私用信号量，包括信号量的数量、物理含义及其初值，其中信号量的数量应与进程间制约关系的数量一致，且信号量的初值为0

        ③给出进程相应程序的算法描述，并将P、V操作加到程序适当的位置

      - 例：假设P1和P2为两个同步进程，它们之间的制约关系是只有当P1完成后，P2才可以开始。令S为P1和P2的同步信号，其初始值为0，表示P1执行未结束。

        semaphore S=0;

        P1( ){                           P2( ){             

        ​          ......                                   P(S);       

        ​          计算机完成;                     计算机开始;

        ​           V(S);                                 ......       

        ​         }                                   }

    - 使用P、V操作时，P、V操作必须成对出现

    - 单信号量机制：互斥型信号量、整型信号量和记录型信号量

    - 多信号量机制：AND型信号量和信号量集

11. #### 死锁的定义、产生死锁的原因、必要条件

12. #### 死锁定理

13. #### 银行家算法











