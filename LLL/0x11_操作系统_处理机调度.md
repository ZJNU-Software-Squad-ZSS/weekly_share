# 0x11_操作系统——处理机调度

1. 作业：作业是用户向计算机提交任务的任务实体（编码—>计算机所完成的工作即作业）
   - 进程是计算机为了完成用户任务实体而设置的执行实体。
   - 一个作业总是由一个以上的多个进程组成。
   - 作业（Job，任务）>程序（静态）>进程（PCB）>线程(TCB)
   - 作业的状态
     - 提交状态：作业从输入设备进入外部存储设备的过程
     - 后备状态：作业已经输入完毕但是还没进内存之前的状态
     - 运行状态：作业进入内存并且没有运行完毕
     - 完成状态：作业运行完成但资源尚未被回收

[![1tVlyn.md.png](https://s2.ax1x.com/2020/02/02/1tVlyn.md.png)](https://imgchr.com/i/1tVlyn)

2. #### 三级调度：作业调度、交换调度、进程调度

   ![lD8YGt.png](https://s2.ax1x.com/2020/01/05/lD8YGt.png)

   - 高级调度（**作业调度**、宏观调度、收容调度）

     - 按一定原则对外存上的作业进行调度，并建立进程PCB
     - 决定允许哪些作业竞争系统资源
     - 作业被系统收容后，就变成进程（或进程组）

   - 中级调度（**交换调度**）

     - 决定允许哪些进程竞争处理机
     - 通过对进程临时挂起和激活的方法对系统负载波动作出反映
     - 是作业进入系统和将处理机分配给这些作业二者之间的一个缓冲

     **引入中级调度的目的：提高内存的利用率和系统吞吐量**

   - 低级调度（**进程调度**）

     - 决定就绪队列中的哪个进程将获得处理机
     - 进程调度程序应常驻内存
     - 进程调度的方式：非抢占方式，抢占方式

     **抢占的方式有：1 时间片原则；2 优先级原则；3 短进程优先原则；**

3. 作业调度

   - 功能：按某种算法从后备队列中挑选一个或一批作业调入内存，并创建PCB.

   - 目标：对所有作业应该是公平合理；应使设备有高的利用率；每天执行尽可能多的作业；有快的响应时间

   - 作业的性能衡量

     - #### 周转时间=完成-提交=等待+运行

     - #### 带权周转时间=周转 / 运行=（等待+运行）/ 运行=1+等待 /运行 >= 1

     - #### 响应比=带权周转时间

4. 作业调度算法和进程调度算法：

   - #### FCFS(先来先服务调度算法)

   - ## SJF、SPF(短者优先调度算法)

   - ## HRN(最高响应比作业优先算法)

     响应比=带权周转时间=1+等待/运行

   - #### RR(时间片轮转法)

     响应时间  S＝R/Nmax    【R（响应时间）Nmax（最大进程数）】

     - 这是一种常用于分时系统的调度算法，它只能适用于一般实时信息处理系统，而不能用于实时要求严格的实时控制系统

   - #### 优先级调度算法

     - 非抢占的优先级调度算法：常用于多道批处理系统的调度算法，也可用于实时要求不太严格的实时控制系统。
     - 立即抢占的优先级调度算法：这种算法适用于实时要求比较严格的实时控制系统。
     - 基于时钟中断抢占的优先级调度算法：用于大多数的实时系统中。 

   - #### 多级反馈队列调度算法

     - 设置多级就绪队列；
     - 各级就绪队列具有不同大小的时间片；
     - 按队列优先级高到低进行进程调度；
     - 一进程进入较高优先级队列时可能要重新调度。

     **调度算法的性能：具有较好的性能，能照顾到各种用户的利益**

5. 死锁问题：在多道程序系统中，多个进程并发运行，共享资源，从而提高了资源的利用率。但是若对资源的管理和使用不当，在一定条件下会导致系统发生一种随机性故障――死锁。在一些系统中，比如实时控制系统，系统一旦发生死锁将导致灾难性的后果。

6. 资源的分类

   【根据性质分类】

   - 可剥夺（抢占）资源：指资源占有进程虽然需要使用该资源，但另一个进程却强行把资源从占有者进程处抢来。
     - CPU、主存、硬盘，该类资源可为几个进程共同使用
   - 不可剥夺（抢占）资源：指只有占用者进程不再需要使用该资源而主动释放资源外，其它进程不得在占有者进程使用资源过程中强行抢占。
     - 打印机，读卡机，磁带驱动器，可为某个进程独享（不可抢占）

   【根据使用方式】共享资源和独享资源

   【根据使用期限】永久资源和临时性资源