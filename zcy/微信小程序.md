# 培训内容- 小程序入门培训大纲:

## 什么是小程序

 小程序是一种运行在微信客户端，继微信订阅号、服务号、企业号之后新的微信应用形态，既无需下载安装，又有近似原生应用的体验。 
它由javascript+WXML+WXSS混合编写，但不是运行在浏览器之上，所以一定程度上避免了浏览器体验不流畅的问题。 

## 小程序的产生背景

在PC互联网时代，想必大家都经历过这样的情形：时不时收到软件更新提示，等几分钟甚至更长，下载安装完成后，忘记了登录帐号或密码。

在移动互联网时代，同样上演着PC互联网C/S架构无法避免的问题，你的每项需求都需要安装APP，越来越多的APP应用即将占满手机存储空间.

那么有没有一种软件架构既不需要下载安装，又能够提供像客户端一样流畅友好的用户体验呢？

答案是HTML5 + javascript；

## 应用场景

小程序比较适合服务性APP，也就是张小龙所说的用完即走。并不是所有的服务都适用于小程序，但是大部分服务和初创公司都可以接入自己的小程序，如果你的产品有一下特点：

```
1. 流程简单
2. 低频
3. 非刚需
```

可以着手准备小程序版的APP.

流程简单：核心功能，用户可以一步到位满足需要，无选择困扰，无需停留。

低频：用户使用频率，半个月甚至一个月才使用一次，比如出售火车票，话费充值。

非刚需：可以理解为用户可以暂时放弃的需求，例如家政、在线教育、求职招聘、二手买卖、旅游、票务等特定场景。

## 小程序优势与劣势分析

优势：

```
1. 有微信庞大的基础用户
2. 无需下载安装和更新
3. 统一了Android、IOS、WP三大平台，一套程序，多处运行。
4. 缩短产品开发周期和和节省人力成本，这一点对初创公司尤为重要。
```

劣势：

```
1. 平台封闭性过高，比如无法接入支付宝，目前只能使用腾讯自家的支付产品。
2. 不兼容某些WEB标准协议
3. 不支持NPM
4. 组件不完善
5. 不能在浏览器运行
```

大家的看法

```
https://www.v2ex.com/t/527034
https://www.zhihu.com/question/50879269
```



## 如何成为小程序的开发者

```
1. 一台不那么差的电脑
2. 熟悉HTML、CSS、ES6标准
3. 熟练使用javascript
4. 重要的是要有浓厚的兴趣和持久的学习动力。（重要）
```

## 小程序设计规范

1. 友好礼貌 
   为了避免用户在微信中使用小程序服务时，注意力被周围复杂环境干扰，小程序在设计时应该注意减少无关的设计元素对用户目标的干扰，礼貌地向用户展示程序提供的服务，友好地引导用户进行操作。

    

2. 重点突出
   每个页面都应有明确的重点，以便于用户每进入一个新页面的时候都能快速地理解页面内容，在确定了重点的前提下，应尽量避免页面上出现其他干扰项影响用户的决策和操作。

    

3. 清晰明确 
   一旦用户进入我们的小程序页面，我们就有责任和义务清晰明确地告知用户身在何处、又可以往何处去，确保用户在页面中游刃有余地穿梭而不迷路，这样才能为用户提供安全的愉悦的使用体验。

## 微信开发者工具的认识

![](images/微信图片_20191130152924.png)

## 小程序开发的基础知识

### 目录文件分析

1. 框架文件

   - app.js  小程序（全局）逻辑

   - app.json  小程序(全局)公共设置，决定页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 等 

   - app.wxss  小程序公共(全局)样式表

     ```
     题外话：名字比较奇怪
     	css：Cascading Style Sheets，层叠样式表
     	wxss: 微信样式表
     ```

2. 某一个页面文件

   - js 页面逻辑
   - wxml  页面结构，框架设计的一套标签语言，结合基础组件、事件系统，可以构建出页面的结构， 类似于html文件。
   - wxss  是一套样式语言，用于描述 WXML 的组件样式。用来决定 WXML 的组件应该怎么显示。
   - json 页面配置参数

3.  注意：一个框架页面至少包含js、wxml、wxss三个文件类型，文件名要一样，例如首页index.js、index.wxml、index.wxss,并且要放在同一文件夹下。页面注册时，文件名不需要写文件后缀，因为框架会自动去寻找路径.json,.js,.wxml,.wxss的四个文件进行整合。 

### 为开发者提供的一些功能

**组件参考：**

- 视图容器：View、Scroll-View、Swiper
- 基础内容：Icon、Text、Progress
- 表单组件：Button、CheckBox、form、Input等
- 操作反馈：Action-Sheet、Modal、Loading
- 导航：Navigator
- 媒体组建：Audio、Image、Video
- 地图：Map
- 画布：Canvas

**API 参考**

- 网络：常规请求、上传下载、WebSocket
- 媒体：图片、录音、音频/音乐播放控制、文件操作、视频播放
- 数据：数据缓存能力
- 位置：获取位置、查看位置
- 设备：网络状态、系统信息、重力感应、罗盘
- 界面：设置导航条、导航、动画、绘图、其它
- 开放接口：登录（签名加密）、用户信息、微信支付、模板消息

### 小程序数据动态绑定（比较重要）

小程序说白了就是一套框架，框架的核心是一个响应的数据绑定系统。整个系统分为两块视图层（View）和逻辑层（App Service）
 框架可以让数据与视图非常简单地保持同步。当做数据修改的时候，只需要在逻辑层修改数据，视图层就会做相应的更新。

微信小程序是通过什么方法来实现数据绑定的呢？答案是状态模式-单向数据流。
状态模式定义一个对象，改对象可以通过管理其状态的变化，从而实现应用程序做出相应的变化。 

![](images/QQ截图20191130214208.png)

简单的讲，对象状态化，只要对象状态发送变化，就通知页面更新视图元素。 通过以下三个步骤实现：

- 识别哪个UI元素被绑定了相应的对象。
- 监视对象状态的变化。
- 将所有变化传播到绑定的视图上。

> 注意： **数据流向是单向的，即视图变化不会影响对象状态。** 



​	一系列多元化的数据绑定方式(都可以在文档中找到)

```html
index.wxml
 <!--数据绑定--内容-->
<view>{{message}}</view>

<!--数据绑定--组件属性-->
<view id="item-{{id}}">组件属性id-{{id}}</view>

<!--数据绑定---控制属性-->
<view wx:if="{{condition}}">控制属性{{condition}}</view>

<!--数据绑定---三元运算-->
<view hidden="{{flag ? true : false}}">Hidden--{{flag}}</view>

<!--数据绑定---算数运算-->
<view>{{a + b}} + {{c}} + d</view>

<!--数据绑定---逻辑判断-->
<view wx:if="{{length > 5}}">6</view>

<!--数据绑定---字符串运算-->
<view>{{"Hello  " + name}}</view>

<!--数据绑定---数组组合-->
<view wx:for="{{[zero, 1, 2, 3, 4, 5, 6]}}">{{item}}</view>

<!--数据绑定---对象-->
<!--最终组合成的对象是{for: 1, bar: 2}-->
<template is="objectCombine" data="{{for: x, bar: y}}"></template>

<!--数据绑定---扩展运算符 ... 来将一个对象展开-->
<!--最终组合成的对象是{a: 1, b: 2, c: 3, d: 4, e: 5}-->
<template is="objectCombine" data="{{...obj1, ...obj2, e: 5}}"></template>

<!--数据绑定---对象的 key 和 value 相同-->
<!--最终组合成的对象是{foo: 'my-foo', bar:'my-bar'}-->
<template is="objectCombine" data="{{foo, bar}}"></template>
```



但是：数据绑定既然是单向的，那该如何修改数据呢？

视图上的数据都必须用过事件传递给对象，只有用户操作视图，才能获取到数据，并更新对象状态。调用this.setData（）方法实现视图的部分渲染。如下图： 

![](images/QQ截图20191130214602.png)

与传统的页面数据操作的比较

index.wxml:

```html
<view bindtap="changeText"> {{ message }} </view>
```

index.js:

```js
Page({
 data: {
   message: 'Hello MINA!'
 },
changeText: function(){
    this.setData({
      message:'changed data'
    })
  }
})
```



## 小程序开发文档检索与查询

## 一些小技巧

1. 如果删除文件失败，可以右键进入磁盘进行删除（注意先把开发者工具给关了）

2. 如何快速的创建页面

   在`app.json`的page配置项中，添加相应的页面地址，ctrlS 后会自动生成
   
   



