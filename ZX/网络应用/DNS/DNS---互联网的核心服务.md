# DNS---互联网的核心服务

   ### Domain Name System 域名解析系统

  ## 主题

  		1. Internet上主机/路由器的识别问题
       * IP地址
       * 域名： www.hit.edu.cn
		2. 问题：域名和IP地址如何映射
		3. 域名解析系统DNS
     	* 多层命名服务器构成的分布式数据库
      * 应用层协议：完成名字的解析
        	* Internet核心功能由应用层协议实现
        	* 网络边界复杂

## ==DNS服务==

 	* 域名向IP地址的翻译
 	* 主机识别
 	* 邮件服务器别名
 	* 负载均衡：Web服务器



为什么不使用集中式的DNS？

		1. 单点失败问题：当一个服务器失败时，整个互联网将瘫痪
  		2. 流量问题：流量会过大
  		3. 距离问题：会引起时延过长
  		4. 维护问题

## DNS 是分布式层次式的数据库

  * 根域名服务器

    ​	本地域名解析服务器无法解析域名时，访问根域名服务器

    1. 如果不知道映射，访问权威域名服务器
    2. 获得映射
    3. 向本地域名服务器返回映射

    全球13个根域名服务器，中国没有！！！！

* 顶级域名服务器：负责com，org等和国家顶级域名：中国cn

* 权威域名服务器：组织的域名解析服务器，提供组织内部服务器的解析服务

* 本地域名解析服务器

  	1. 不严格属于层级体系
   	2. 每个ISP有一个本地域名服务器
   	3. 当我主机进行DNS查询时，查询会被发送到本地域名服务器，作为代理，它会将查询转发给层级域名解析服务器系统

## ==DNS==查询示例 

​		迭代查询：

​			上图

1. ![1573369659716](C:\Users\19788\AppData\Roaming\Typora\typora-user-images\1573369659716.png )

   ​	递归查询：

   ![1573369756991](C:\Users\19788\AppData\Roaming\Typora\typora-user-images\1573369756991.png)

## DNS记录缓存和更新

​		只要域名解析服务器获得域名——IP映射，即缓存这个映射

   * 一段时间过后，缓存条目会失效

   * 本地域名服务器一般会缓存顶级域名服务器的映射

     因此根域名服务器不经常被访问

DNS记录

​		资源记录：RR,resource，records

  * Type = A

    	1. name = 主机域名
     	2. value：IP地址

* Type = NS

  	1. name = 域（edu.cn)
   	2. value：该域权威域名解析服务器的主机域名

* Type=CNAME

  	1. name：某一真实域名的别名 www.ibm.com的别名——serverreast.backuo2.ibm.com
   	2. value:真实域名

* Type = MX

  ​	value是与name相对应的邮件服务器

### 问题

​	DNS使用哪个协议？

		* DNS使用53号端口，同时使用TCP和UDP
		* 传输时用TCP，域名解析时用UDP

## ==怎么注册域名==

   	![1573371521877](C:\Users\19788\AppData\Roaming\Typora\typora-user-images\1573371521877.png)

